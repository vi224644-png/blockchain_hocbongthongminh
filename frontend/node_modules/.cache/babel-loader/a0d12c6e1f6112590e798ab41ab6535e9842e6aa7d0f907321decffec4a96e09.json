{"ast":null,"code":"var _jsxFileName = \"/Users/wocten/Documents/blockchain_hocbongthongminh/project-root/frontend/src/components/AdminDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { getContract } from '../services/eth';\nimport { createScholarshipDB } from '../services/api';\nimport { ethers } from 'ethers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminDashboard = () => {\n  _s();\n  const [form, setForm] = useState({\n    name: '',\n    amount: '',\n    slots: '',\n    desc: ''\n  });\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const contract = await getContract();\n      if (!contract) return alert(\"Vui lòng kết nối ví MetaMask!\");\n\n      // FIX: Ethers v6 dùng ethers.parseEther (không có .utils)\n      const amountWei = ethers.parseEther(form.amount);\n\n      // Tính tổng tiền: Amount * Slots (Lưu ý: slots phải chuyển về BigInt)\n      const totalVal = amountWei * BigInt(form.slots);\n\n      // Gửi transaction\n      const tx = await contract.createScholarship(form.name, form.slots, {\n        value: totalVal\n      });\n      console.log(\"Đang xử lý transaction...\", tx.hash);\n      await tx.wait(); // Chờ xác nhận trên blockchain\n\n      const count = await contract.getScholarshipCount();\n\n      // Lưu vào MongoDB\n      await createScholarshipDB({\n        blockchainId: Number(count),\n        title: form.name,\n        description: form.desc\n      });\n      alert(\"Tạo học bổng thành công!\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Lỗi: \" + (err.reason || err.message));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-xl mx-auto mt-16\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow-xl rounded-2xl p-8 border border-gray-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-indigo-600\",\n          children: \"\\u2699\\uFE0F Admin Panel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-700 font-light\",\n          children: \"/ T\\u1EA1o H\\u1ECDc B\\u1ED5ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold text-gray-700 mb-1\",\n            children: \"T\\xEAn h\\u1ECDc b\\u1ED5ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \" w-full border border-gray-300 rounded-xl p-3  focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500  transition-all shadow-sm \",\n            placeholder: \"VD: H\\u1ECDc b\\u1ED5ng CNTT\",\n            onChange: e => setForm({\n              ...form,\n              name: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold text-gray-700 mb-1\",\n            children: \"S\\u1ED1 ti\\u1EC1n m\\u1ED7i su\\u1EA5t (ETH)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \" w-full border border-gray-300 rounded-xl p-3  focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500  transition-all shadow-sm \",\n            placeholder: \"0.1\",\n            onChange: e => setForm({\n              ...form,\n              amount: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold text-gray-700 mb-1\",\n            children: \"S\\u1ED1 l\\u01B0\\u1EE3ng su\\u1EA5t h\\u1ECDc b\\u1ED5ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \" w-full border border-gray-300 rounded-xl p-3  focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500  transition-all shadow-sm \",\n            placeholder: \"5\",\n            onChange: e => setForm({\n              ...form,\n              slots: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold text-gray-700 mb-1\",\n            children: \"M\\xF4 t\\u1EA3 chi ti\\u1EBFt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \" w-full border border-gray-300 rounded-xl p-3 h-28 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500  transition-all shadow-sm \",\n            placeholder: \"\\u0110i\\u1EC1u ki\\u1EC7n, \\u0111\\u1ED1i t\\u01B0\\u1EE3ng h\\u01B0\\u1EDFng, y\\xEAu c\\u1EA7u h\\u1ED3 s\\u01A1...\",\n            onChange: e => setForm({\n              ...form,\n              desc: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \" w-full py-3 rounded-xl text-white font-bold text-lg  bg-gradient-to-r from-indigo-500 to-indigo-600  hover:from-indigo-600 hover:to-indigo-700 shadow-md hover:shadow-xl transition-all duration-300 \",\n          children: \"T\\u1EA1o H\\u1ECDc B\\u1ED5ng (G\\u1EEDi ETH)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminDashboard, \"D0Qigh4VUgVHTqQosb6UGJ/iKwc=\");\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","getContract","createScholarshipDB","ethers","jsxDEV","_jsxDEV","AdminDashboard","_s","form","setForm","name","amount","slots","desc","handleSubmit","e","preventDefault","contract","alert","amountWei","parseEther","totalVal","BigInt","tx","createScholarship","value","console","log","hash","wait","count","getScholarshipCount","blockchainId","Number","title","description","err","error","reason","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","onChange","target","type","_c","$RefreshReg$"],"sources":["/Users/wocten/Documents/blockchain_hocbongthongminh/project-root/frontend/src/components/AdminDashboard.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { getContract } from '../services/eth';\nimport { createScholarshipDB } from '../services/api';\nimport { ethers } from 'ethers';\n\nconst AdminDashboard = () => {\n    const [form, setForm] = useState({ name: '', amount: '', slots: '', desc: '' });\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            const contract = await getContract();\n            if (!contract) return alert(\"Vui lòng kết nối ví MetaMask!\");\n\n            // FIX: Ethers v6 dùng ethers.parseEther (không có .utils)\n            const amountWei = ethers.parseEther(form.amount); \n            \n            // Tính tổng tiền: Amount * Slots (Lưu ý: slots phải chuyển về BigInt)\n            const totalVal = amountWei * BigInt(form.slots); \n\n            // Gửi transaction\n            const tx = await contract.createScholarship(form.name, form.slots, { value: totalVal });\n            \n            console.log(\"Đang xử lý transaction...\", tx.hash);\n            await tx.wait(); // Chờ xác nhận trên blockchain\n            \n            const count = await contract.getScholarshipCount();\n\n            // Lưu vào MongoDB\n            await createScholarshipDB({\n                blockchainId: Number(count),\n                title: form.name,\n                description: form.desc\n            });\n\n            alert(\"Tạo học bổng thành công!\");\n        } catch (err) {\n            console.error(err);\n            alert(\"Lỗi: \" + (err.reason || err.message));\n        }\n    };\n\n    return (\n    <div className=\"max-w-xl mx-auto mt-16\">\n        <div className=\"bg-white shadow-xl rounded-2xl p-8 border border-gray-100\">\n            \n            <h2 className=\"text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3\">\n                <span className=\"text-indigo-600\">⚙️ Admin Panel</span>  \n                <span className=\"text-gray-700 font-light\">/ Tạo Học Bổng</span>\n            </h2>\n\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n                \n                {/* Name */}\n                <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n                        Tên học bổng\n                    </label>\n                    <input\n                        className=\"\n                            w-full border border-gray-300 rounded-xl p-3 \n                            focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 \n                            transition-all shadow-sm\n                        \"\n                        placeholder=\"VD: Học bổng CNTT\"\n                        onChange={e => setForm({ ...form, name: e.target.value })}\n                    />\n                </div>\n\n                {/* Amount */}\n                <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n                        Số tiền mỗi suất (ETH)\n                    </label>\n                    <input\n                        className=\"\n                            w-full border border-gray-300 rounded-xl p-3 \n                            focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 \n                            transition-all shadow-sm\n                        \"\n                        placeholder=\"0.1\"\n                        onChange={e => setForm({ ...form, amount: e.target.value })}\n                    />\n                </div>\n\n                {/* Slots */}\n                <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n                        Số lượng suất học bổng\n                    </label>\n                    <input\n                        type=\"number\"\n                        className=\"\n                            w-full border border-gray-300 rounded-xl p-3 \n                            focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 \n                            transition-all shadow-sm\n                        \"\n                        placeholder=\"5\"\n                        onChange={e => setForm({ ...form, slots: e.target.value })}\n                    />\n                </div>\n\n                {/* Description */}\n                <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\n                        Mô tả chi tiết\n                    </label>\n                    <textarea\n                        className=\"\n                            w-full border border-gray-300 rounded-xl p-3 h-28\n                            focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 \n                            transition-all shadow-sm\n                        \"\n                        placeholder=\"Điều kiện, đối tượng hưởng, yêu cầu hồ sơ...\"\n                        onChange={e => setForm({ ...form, desc: e.target.value })}\n                    />\n                </div>\n\n                {/* Submit */}\n                <button\n                    type=\"submit\"\n                    className=\"\n                        w-full py-3 rounded-xl text-white font-bold text-lg \n                        bg-gradient-to-r from-indigo-500 to-indigo-600 \n                        hover:from-indigo-600 hover:to-indigo-700\n                        shadow-md hover:shadow-xl transition-all duration-300\n                    \"\n                >\n                    Tạo Học Bổng (Gửi ETH)\n                </button>\n\n            </form>\n        </div>\n    </div>\n);\n\n};\n\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}