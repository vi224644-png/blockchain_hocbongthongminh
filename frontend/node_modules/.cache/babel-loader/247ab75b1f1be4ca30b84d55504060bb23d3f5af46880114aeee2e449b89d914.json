{"ast":null,"code":"var _jsxFileName = \"/Users/wocten/Documents/blockchain_hocbongthongminh/project-root/frontend/src/components/ScholarshipList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { getContract } from '../services/eth';\nimport { fetchScholarshipsDB } from '../services/api';\nimport { ethers } from 'ethers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ScholarshipList = () => {\n  _s();\n  const [scholarships, setScholarships] = useState([]);\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        // Lấy dữ liệu từ MongoDB\n        const dbData = await fetchScholarshipsDB();\n\n        // Lấy dữ liệu từ Blockchain\n        const contract = await getContract();\n        if (!contract) return; // Nếu chưa kết nối ví thì thôi\n\n        const count = await contract.getScholarshipCount();\n        const loadedItems = [];\n        for (let i = 1; i <= Number(count); i++) {\n          const sc = await contract.scholarships(i);\n          const meta = dbData.find(d => d.blockchainId === i);\n          loadedItems.push({\n            id: i,\n            name: sc.name,\n            // FIX: Ethers v6 dùng ethers.formatEther\n            amount: ethers.formatEther(sc.amount),\n            slots: Number(sc.availableSlots),\n            desc: meta ? meta.description : \"Đang tải mô tả...\"\n          });\n        }\n        setScholarships(loadedItems);\n      } catch (error) {\n        console.error(\"Lỗi tải dữ liệu:\", error);\n      }\n    };\n    loadData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 mt-12\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-extrabold text-gray-900 mb-10 tracking-tight\",\n      children: \"Danh S\\xE1ch H\\u1ECDc B\\u1ED5ng \\u0110ang M\\u1EDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), scholarships.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-20 text-gray-500 text-lg animate-pulse\",\n      children: \"\\u0110ang t\\u1EA3i d\\u1EEF li\\u1EC7u h\\u1ECDc b\\u1ED5ng...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid gap-8 sm:grid-cols-2 lg:grid-cols-3\",\n      children: scholarships.map(sc => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" bg-white rounded-2xl shadow-md hover:shadow-xl  transition-all duration-300 p-7 border border-gray-100 hover:-translate-y-1 group \",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-900 mb-3 group-hover:text-indigo-600 transition\",\n          children: sc.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-5 text-sm leading-relaxed line-clamp-3\",\n          children: sc.desc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-indigo-600 bg-indigo-100 px-3 py-1 rounded-lg text-sm\",\n            children: [sc.amount, \" ETH / su\\u1EA5t\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500 text-sm\",\n            children: [\"C\\xF2n: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold\",\n              children: sc.slots\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 34\n            }, this), \" su\\u1EA5t\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \" w-full bg-gradient-to-r from-indigo-500 to-indigo-600  hover:from-indigo-600 hover:to-indigo-700 text-white font-semibold py-2.5 rounded-xl shadow hover:shadow-lg transition-all duration-300 \",\n          children: \"N\\u1ED9p \\u0110\\u01A1n \\u1EE8ng Tuy\\u1EC3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, sc.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(ScholarshipList, \"TG/pls/Kj2a3jZH3vYw8TbqMLTY=\");\n_c = ScholarshipList;\nexport default ScholarshipList;\nvar _c;\n$RefreshReg$(_c, \"ScholarshipList\");","map":{"version":3,"names":["React","useEffect","useState","getContract","fetchScholarshipsDB","ethers","jsxDEV","_jsxDEV","ScholarshipList","_s","scholarships","setScholarships","loadData","dbData","contract","count","getScholarshipCount","loadedItems","i","Number","sc","meta","find","d","blockchainId","push","id","name","amount","formatEther","slots","availableSlots","desc","description","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","_c","$RefreshReg$"],"sources":["/Users/wocten/Documents/blockchain_hocbongthongminh/project-root/frontend/src/components/ScholarshipList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getContract } from '../services/eth';\nimport { fetchScholarshipsDB } from '../services/api';\nimport { ethers } from 'ethers';\n\nconst ScholarshipList = () => {\n    const [scholarships, setScholarships] = useState([]);\n\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                // Lấy dữ liệu từ MongoDB\n                const dbData = await fetchScholarshipsDB();\n                \n                // Lấy dữ liệu từ Blockchain\n                const contract = await getContract();\n                if (!contract) return; // Nếu chưa kết nối ví thì thôi\n\n                const count = await contract.getScholarshipCount();\n                \n                const loadedItems = [];\n                for (let i = 1; i <= Number(count); i++) {\n                    const sc = await contract.scholarships(i);\n                    const meta = dbData.find(d => d.blockchainId === i);\n                    \n                    loadedItems.push({\n                        id: i,\n                        name: sc.name,\n                        // FIX: Ethers v6 dùng ethers.formatEther\n                        amount: ethers.formatEther(sc.amount), \n                        slots: Number(sc.availableSlots),\n                        desc: meta ? meta.description : \"Đang tải mô tả...\"\n                    });\n                }\n                setScholarships(loadedItems);\n            } catch (error) {\n                console.error(\"Lỗi tải dữ liệu:\", error);\n            }\n        };\n        loadData();\n    }, []);\n\n    return (\n    <div className=\"max-w-7xl mx-auto px-4 mt-12\">\n        <h2 className=\"text-3xl font-extrabold text-gray-900 mb-10 tracking-tight\">\n            Danh Sách Học Bổng Đang Mở\n        </h2>\n\n        {scholarships.length === 0 && (\n            <div className=\"text-center py-20 text-gray-500 text-lg animate-pulse\">\n                Đang tải dữ liệu học bổng...\n            </div>\n        )}\n\n        <div className=\"grid gap-8 sm:grid-cols-2 lg:grid-cols-3\">\n            {scholarships.map((sc) => (\n                <div\n                    key={sc.id}\n                    className=\"\n                        bg-white rounded-2xl shadow-md hover:shadow-xl \n                        transition-all duration-300 p-7 border border-gray-100\n                        hover:-translate-y-1 group\n                    \"\n                >\n                    {/* Title */}\n                    <h3 className=\"text-xl font-bold text-gray-900 mb-3 group-hover:text-indigo-600 transition\">\n                        {sc.name}\n                    </h3>\n\n                    {/* Description */}\n                    <p className=\"text-gray-600 mb-5 text-sm leading-relaxed line-clamp-3\">\n                        {sc.desc}\n                    </p>\n\n                    {/* Amount + Slots */}\n                    <div className=\"flex items-center justify-between mb-6\">\n                        <span className=\"font-semibold text-indigo-600 bg-indigo-100 px-3 py-1 rounded-lg text-sm\">\n                            {sc.amount} ETH / suất\n                        </span>\n                        <span className=\"text-gray-500 text-sm\">\n                            Còn: <span className=\"font-bold\">{sc.slots}</span> suất\n                        </span>\n                    </div>\n\n                    {/* Button */}\n                    <button\n                        className=\"\n                            w-full bg-gradient-to-r from-indigo-500 to-indigo-600 \n                            hover:from-indigo-600 hover:to-indigo-700\n                            text-white font-semibold py-2.5 rounded-xl\n                            shadow hover:shadow-lg transition-all duration-300\n                        \"\n                    >\n                        Nộp Đơn Ứng Tuyển\n                    </button>\n                </div>\n            ))}\n        </div>\n    </div>\n);\n\n};\n\nexport default ScholarshipList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}